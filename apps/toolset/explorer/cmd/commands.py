# coding: utf-8import osimport shutilimport hashlibimport jsonfrom apps.explorer.cmd import Commandsclass Bash(Commands):    ''' bash commands '''    def index(self):        tree = os.listdir(self.root_path)        return tree    def tree(self):        cnt = 0        for item in os.walk(self.root_path):            if item[1]:                path = item[0].replace(self.root_path,'').replace('\\','/')                path += '/'                self.result[cnt] = {                    'path': path,                    'sub': sorted(item[1]),                }                cnt += 1        return json.dumps(self.result, ensure_ascii=False)    def execute(self, get=None, post=None, files=None):        if action == 'mkdir':            path = self.root_path+post['path']+'/'+post['name']            #path = path.replace('/','\\') #   ---   ---   ---   for windows !!!            os.makedirs(path, mode=0o777)            self.result['path'] = post['path']        if action == 'remove':            path = self.root_path+post['path']+'/'+post['name']            #path = path.replace('/','\\') #   ---   ---   ---   for windows !!!            shutil.rmtree(path)            self.result['path'] = post['path']        if action == 'open':            path = self.root_path + get['path']            for i in os.listdir(path):                if os.path.isfile( os.path.join(path,i) ):                    self.files[i] = {                        'name': i                    }                else:                    self.dirs[i] = {                        'name': i                    }            self.result = {                'dirs': self.dirs,                'files': self.files,            }        return json.dumps(self.result, ensure_ascii=False)